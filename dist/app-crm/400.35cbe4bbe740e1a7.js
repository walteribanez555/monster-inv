"use strict";(self.webpackChunkinv=self.webpackChunkinv||[]).push([[400],{3400:(ge,N,c)=>{c.r(N),c.d(N,{IdentityModule:()=>he});var T=c(3030),e=c(3953);let J=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-identity"]],standalone:!0,features:[e.aNF],decls:1,vars:0,template:function(s,o){1&s&&e.nrm(0,"router-outlet")},dependencies:[T.n3],encapsulation:2})}return r})();var d=c(177);let X=(()=>{class r{constructor(){this.onAddToggle=new e.bkB}onAdd(){this.onAddToggle.emit()}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-users-header"]],outputs:{onAddToggle:"onAddToggle"},standalone:!0,features:[e.aNF],decls:12,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-medium","text-primary-foreground",3,"click"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"h3",2),e.EFF(3,"Usuarios - Lista"),e.k0s(),e.j41(4,"div",3)(5,"a",4),e.EFF(6,"Lista"),e.k0s(),e.j41(7,"span"),e.EFF(8," - Usuarios"),e.k0s()()(),e.j41(9,"div",5)(10,"button",6),e.bIt("click",function(){return o.onAdd()}),e.EFF(11," Agregar Usuario "),e.k0s()()())},dependencies:[d.MD],encapsulation:2})}return r})();var A=c(8860);const z=["item-table-user",""];let Q=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["","item-table-user",""]],inputs:{user:"user"},standalone:!0,features:[e.aNF],attrs:z,decls:13,vars:6,consts:[[1,"py-3","pr-3","text-start"],[1,"pl-1"],[1,"mb-1","text-sm","font-semibold","text-foreground","text-center"],[1,"py-3","pl-3","text-right"],[1,"pr-1"],[1,"text-sm","rounded-md",3,"ngClass"]],template:function(s,o){1&s&&(e.j41(0,"td",0)(1,"div",1)(2,"span",2),e.EFF(3),e.k0s()()(),e.j41(4,"td",0)(5,"div",1)(6,"span",2),e.EFF(7),e.k0s()()(),e.j41(8,"td",3)(9,"div",4)(10,"span",5),e.EFF(11),e.nI1(12,"appTypeStatus"),e.k0s()()()),2&s&&(e.R7$(3),e.JRh(o.user.username),e.R7$(4),e.JRh(o.user.name),e.R7$(3),e.Y8G("ngClass",1===o.user.status?"text-sm text-green-600 border p-1 border-green-600 rounded-md":"text-sm text-red-600 border p-1 border-red-600 rounded-md"),e.R7$(),e.JRh(e.bMT(12,4,o.user.status)))},dependencies:[d.MD,d.YU,A.N],encapsulation:2})}return r})();function q(r,a){if(1&r){const t=e.RV6();e.j41(0,"tr",10),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG();return e.Njj(n.onSelectTable(o))}),e.k0s()}2&r&&e.Y8G("user",a.$implicit)}let H=(()=>{class r{constructor(){this.onSelectUser=new e.bkB}ngOnInit(){}onSelectTable(t){this.onSelectUser.emit(t)}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-users-list"]],inputs:{users:"users"},outputs:{onSelectUser:"onSelectUser"},standalone:!0,features:[e.aNF],decls:17,vars:1,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[1,"mb-4","flex","items-center","justify-between"],[1,"flex-col","items-center"],[1,"text-xs","text-foreground"],[1,"relative","overflow-x-auto"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground"],[1,"py-3","text-left"],[1,"py-3","text-right"],["item-table-user","","class","border-b border-dashed border-border hover:bg-card",3,"user","click",4,"ngFor","ngForOf"],["item-table-user","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"click","user"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.EFF(4,"Lista de Usuarios"),e.k0s()()(),e.j41(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th",7),e.EFF(10,"Username"),e.k0s(),e.j41(11,"th",7),e.EFF(12,"name"),e.k0s(),e.j41(13,"th",8),e.EFF(14,"Status"),e.k0s()()(),e.j41(15,"tbody"),e.DNE(16,q,1,1,"tr",9),e.k0s()()()()),2&s&&(e.R7$(16),e.Y8G("ngForOf",o.users))},dependencies:[d.MD,d.Sq,Q],encapsulation:2})}return r})();var M=c(1413),B=c(7249),h=c(2934),P=c(5227);class b{static#e=this.getSlices=(0,h.OD)(P.b);static#t=this.getUsers=(0,h.Mz)([b.getSlices.users],a=>a);static#s=this.getUser=(0,h.Mz)([b.getSlices.userById],a=>a);static#r=this.getStatus=(0,h.Mz)([b.getSlices.status],a=>a)}var _=c(1451);let Z=(()=>{class r{constructor(){this._store=(0,e.WQX)(h.il),this.users=this._store.selectSignal(b.getSlices.users),this.userByUsername=this._store.selectSignal(b.getUser),this.status=this._store.selectSignal(b.getStatus),this._store.dispatch(new _.z.GetAll({}))}getAll(t){this._store.dispatch(new _.z.GetAll(t))}getOne(t){this._store.dispatch(new _.z.Get(t))}create(t){this._store.dispatch(new _.z.Create(t))}update(t){this._store.dispatch(new _.z.Update(t))}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var R=c(6494),D=c(9652),y=c(6007),u=c(4449),i=c(9417),p=c(9969),Y=c(1467);function K(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",2)(1,"span",3),e.EFF(2),e.k0s(),e.j41(3,"button",4),e.bIt("click",function(){const o=e.eBV(t).index,n=e.XpG();return e.Njj(n.onRemove(o))}),e.qSk(),e.j41(4,"svg",5),e.nrm(5,"path",6),e.k0s()()()}if(2&r){const t=a.$implicit;e.R7$(2),e.JRh(t.name)}}let ee=(()=>{class r{constructor(){this.onRemoveTag=new e.bkB}onRemove(t){const s=this.tags.splice(t,1);this.onRemoveTag.emit(s)}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-list-tags"]],inputs:{tags:"tags"},outputs:{onRemoveTag:"onRemoveTag"},standalone:!0,features:[e.aNF],decls:2,vars:1,consts:[[1,"flex","flex-row","gap-2","flex-wrap","p-2"],["class","flex p-2 border rounded-md ",4,"ngFor","ngForOf"],[1,"flex","p-2","border","rounded-md"],[1,"text-muted-foreground"],[1,"ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","text-muted-foreground"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"]],template:function(s,o){1&s&&(e.j41(0,"div",0),e.DNE(1,K,6,1,"div",1),e.k0s()),2&s&&(e.R7$(),e.Y8G("ngForOf",o.tags))},dependencies:[d.MD,d.Sq,i.X1,i.YN],encapsulation:2})}return r})(),te=(()=>{class r{constructor(){this.selectedList=[],this.value=null,this.isDisabled=!1,this.withFilter=!1,this.cdr=(0,e.WQX)(e.gRc)}writeValue(t){t&&(this.selectedList=t.split(",").map(s=>this.items.find(o=>o.id==parseInt(s))),this.value=t,this.cdr.markForCheck())}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisableState(t){this.isDisabled=t}changeValue(t){this.value=t,this.onTouched?.(),this.onChange?.(t),this.cdr.markForCheck()}ngOnInit(){}onSelectedItem(t){this.selectedList.find(s=>s.id==t)||(this.selectedList.push(this.items.find(s=>s.id==t)),this.changeValue(this.selectedList.map(s=>s.id).join(",")))}onRemoveTag(t){this.selectedList=this.selectedList.filter(s=>s.id!==t.id),this.changeValue(this.selectedList.map(s=>s.id).join(","))}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-multiple-select"]],inputs:{items:"items",withFilter:"withFilter"},standalone:!0,features:[e.Jv_([{provide:i.kq,useExisting:(0,e.Rfq)(()=>r),multi:!0}]),e.aNF],decls:3,vars:3,consts:[[1,"flex","flex-col","gap-2"],[3,"onItemSelected","items","withFilter"],[3,"onRemoveTag","tags"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"app-select",1),e.bIt("onItemSelected",function(l){return o.onSelectedItem(l)}),e.k0s(),e.j41(2,"app-list-tags",2),e.bIt("onRemoveTag",function(l){return o.onRemoveTag(l)}),e.k0s()()),2&s&&(e.R7$(),e.Y8G("items",o.items)("withFilter",!0),e.R7$(),e.Y8G("tags",o.selectedList))},dependencies:[d.MD,Y.w,ee,i.YN,i.X1],encapsulation:2})}return r})(),G=(()=>{class r{constructor(){this.cdr=(0,e.WQX)(e.gRc),this.isOpen=!1,this.listItemsRol=[],this.statusList=[{id:1,name:"Activo"},{id:2,name:"Inactivo"}],this.userForm=new i.gE({id:new i.MJ,username:new i.MJ,name:new i.MJ,password:new i.MJ,confirm:new i.MJ,roles:new i.MJ,status:new i.MJ})}ngAfterViewInit(){this.listItemsRol=this.rols.map(t=>({id:t.rol_id,name:t.rol_name})),this.cdr.detectChanges(),this.userEntity&&this.userForm.patchValue({id:this.userEntity.user_id,username:this.userEntity.username,name:this.userEntity.name,roles:this.userEntity.rols,status:this.userEntity.status}),this.cdr.detectChanges()}close(){this.detailListener?.close()}onSubmit(){this.cdr.detectChanges(),this.detailListener?.submit(this.userForm)}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-user-form"]],inputs:{rols:"rols",userEntity:"userEntity",detailListener:"detailListener"},standalone:!0,features:[e.aNF],decls:41,vars:5,consts:[[1,"shadow-md","flex","mt-2","w-screen","md:w-[500px]","bg-background","l","md:h-[95%]","overflow-auto","px-3","flex-col","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted",3,"ngSubmit","formGroup"],[1,"sticky","top-0","flex","flex-col","bg-background"],[1,"flex","relative","flex-row","items-center","gap-2","py-3","justify-start"],[1,"text-lg","text-foreground"],["type","button",1,"absolute","cursor-pointer","right-0","inline-flex","w-fit","justify-center","rounded-md","bg-background","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","hover:bg-card","sm:mt-0","sm:w-fit",3,"click"],[1,"border-dashed","border-border"],[1,"flex","flex-col","gap-2","py-2","w-full"],["for","username",1,"text-muted-foreground"],["name","username","type","text","formControlName","username","placeholder","Username",1,"w-full"],["for","name",1,"text-muted-foreground"],["name","name","type","text","formControlName","name","placeholder","Walter ibanez",1,"w-full"],["for","roles",1,"text-muted-foreground"],["name","roles","formControlName","roles",3,"items"],["for","status",1,"text-muted-foreground"],["name","status","formControlName","status",3,"items"],["for","password",1,"text-muted-foreground"],["name","password","type","text","formControlName","password","placeholder","Walter ibanez",1,"w-full"],["name","confirm","type","text","formControlName","confirm","placeholder","Walter ibanez",1,"w-full"],[1,"flex","py-2","flex-col","gap-2"],["type","submit",1,"bg-primary","text-white","rounded-md","p-2"]],template:function(s,o){1&s&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(1,"div",1)(2,"div",2)(3,"span",3),e.EFF(4),e.k0s(),e.j41(5,"button",4),e.bIt("click",function(){return o.close()}),e.EFF(6," X "),e.k0s()(),e.nrm(7,"hr",5),e.k0s(),e.j41(8,"div",6)(9,"label",7),e.EFF(10,"Username"),e.k0s(),e.nrm(11,"input",8),e.k0s(),e.nrm(12,"hr",5),e.j41(13,"div",6)(14,"label",9),e.EFF(15,"Nombres"),e.k0s(),e.nrm(16,"input",10),e.k0s(),e.nrm(17,"hr",5),e.j41(18,"div",6)(19,"label",11),e.EFF(20,"Roles"),e.k0s(),e.nrm(21,"app-multiple-select",12),e.k0s(),e.nrm(22,"hr",5),e.j41(23,"div",6)(24,"label",13),e.EFF(25,"Status"),e.k0s(),e.nrm(26,"app-select",14),e.k0s(),e.nrm(27,"hr",5),e.j41(28,"div",6)(29,"label",15),e.EFF(30,"Password"),e.k0s(),e.nrm(31,"input",16),e.k0s(),e.nrm(32,"hr",5),e.j41(33,"div",6)(34,"label",9),e.EFF(35,"Confirmacion"),e.k0s(),e.nrm(36,"input",17),e.k0s(),e.nrm(37,"hr",5),e.j41(38,"div",18)(39,"button",19),e.EFF(40," Guardar Cambios "),e.k0s()()()),2&s&&(e.Y8G("formGroup",o.userForm)("@openClose",o.isOpen?"open":"closed"),e.R7$(4),e.JRh("Agregar Usuario"),e.R7$(17),e.Y8G("items",o.listItemsRol),e.R7$(5),e.Y8G("items",o.statusList))},dependencies:[d.MD,i.X1,i.qT,i.me,i.BC,i.cb,i.j4,i.JD,i.YN,te,Y.w],encapsulation:2,data:{animation:[(0,p.hZ)("openClose",[(0,p.wk)("open",(0,p.iF)({opacity:1,transform:"translateY(0)",visibility:"visible"})),(0,p.wk)("closed",(0,p.iF)({opacity:0,transform:"translateY(-20px)",visibility:"hidden"})),(0,p.kY)("open => closed",[(0,p.i0)("0.5s")]),(0,p.kY)("closed => open",[(0,p.i0)("0.5s")])])]}})}return r})();var F=c(8059),se=c(3517);class v{static#e=this.getSlices=(0,h.OD)(se.$);static#t=this.getRols=(0,h.Mz)([v.getSlices.rols],a=>a);static#s=this.getRol=(0,h.Mz)([v.getSlices.rolById],a=>a);static#r=this.getStatus=(0,h.Mz)([v.getSlices.status],a=>a)}let $=(()=>{class r{constructor(){this._store=(0,e.WQX)(h.il),this.rols=this._store.selectSignal(v.getSlices.rols),this.rolById=this._store.selectSignal(v.getRol),this.status=this._store.selectSignal(v.getStatus),this._store.dispatch(new F.j.GetAll({}))}getAll(t){this._store.dispatch(new F.j.GetAll(t))}getOne(t){this._store.dispatch(new F.j.Get(t))}create(t){this._store.dispatch(new F.j.Create(t))}update(t){this._store.dispatch(new F.j.Update(t))}delete(t){this._store.dispatch(new F.j.Delete(t))}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();class I{constructor(a,t,s,o,n,l){this.username=a,this.password=t,this.confirm=s,this.status=o,this.rols=n,this.name=l}static create(a){const{username:t,password:s,confirm:o,status:n,roles:l,name:m}=a;return t?s?o?n?m?l?[void 0,new I(t,s,o,n,l,m)]:["Rols is required",void 0]:["Name is required",void 0]:["Status is required",void 0]:["Passsword confirmation is required",void 0]:["Password is required",void 0]:["Username is required",void 0]}}class j{constructor(a,t,s,o,n,l,m){this.user_id=a,this.username=t,this.password=s,this.confirm=o,this.status=n,this.rols=l,this.name=m}static create(a){const{user_id:t,name:s,username:o,password:n,confirm:l,status:m,rols:f}=a;return t?o?n?l?m?f?s?[void 0,new j(t,o,n,l,m,f,s)]:["Name is required",void 0]:["Rols is required",void 0]:["Status is required",void 0]:["Password confirmation is required",void 0]:["Password is required",void 0]:["Username is required",void 0]:["User id is required",void 0]}}function re(r,a){}let oe=(()=>{class r{constructor(){this.facadeService=(0,e.WQX)(Z),this.rolFacadeService=(0,e.WQX)($),this.dialogNotifier=new M.B,this.dialogService=(0,e.WQX)(D.o),this.cdr=(0,e.WQX)(e.gRc),this.users$=this.facadeService.users,this.rols$=this.rolFacadeService.rols,this.onLoading$=this.facadeService.status,this.onShowItem=!1,(0,e.QZP)(()=>{switch(this.onLoading$()){case y.p.LOADING:this.dialogService.open({typeDialog:u.h.isLoading,listener:this.dialogNotifier,data:{title:"Cargando",description:"Espere un momento por favor",icon:"assets/icons/loading.svg"},options:{withActions:!1,withBackground:!0,position:[u.Y.center],colorIcon:"text-primary"}});break;case y.p.SUCCESS:this.dialogNotifier.next(null);const s={typeDialog:u.h.isSuccess,data:{title:"Operacion Exitosa",description:"La operacion se ha completado con exito",icon:"assets/icons/heroicons/outline/check-badge.svg"},options:{withBackground:!1,position:[u.Y.top,u.Y.right],colorIcon:"text-green-500",timeToShow:(0,B.O)(2e3)}};this.dialogService.open(s);break;default:this.dialogNotifier.next(null)}})}onAddEvent(){const t=this.dcWrapper.viewContainerRef;t.clear();const s=t.createComponent(G),o={close:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},cancel:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},submit:n=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.dialogService.open({typeDialog:u.h.isAlert,data:{title:"Advertencia",description:"Estas seguro de realizar esta accion",icon:"assets/icons/heroicons/outline/exclamation.svg"},options:{withActions:!0,position:[u.Y.center],withBackground:!0,colorIcon:"text-red-500"}}).subscribe(m=>{const{username:f,password:w,confirm:g,status:x,name:S,roles:k}=n.value,[C,L]=I.create({username:f,password:w,confirm:g,status:x,name:S,roles:k});if(C)throw new Error(C);this.facadeService.create(L)})},delete:n=>{}};s.instance.rols=this.rols$(),s.instance.detailListener=o,this.onShowItem=!0,this.cdr.detectChanges(),s.instance.isOpen=!0}onSelectUser(t){const s=this.dcWrapper.viewContainerRef;s.clear();const o=s.createComponent(G),n={close:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},cancel:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},submit:l=>{this.dialogService.open({typeDialog:u.h.isAlert,data:{title:"Advertencia",description:"Estas seguro de realizar esta accion",icon:"assets/icons/heroicons/outline/exclamation.svg"},options:{withActions:!0,position:[u.Y.center],withBackground:!0,colorIcon:"text-red-500"}}).subscribe(f=>{const{id:w,username:g,password:x,confirm:S,status:k,name:C,roles:L}=l.value,[V,fe]=j.create({user_id:w,username:g,password:x,confirm:S,status:k,name:C,rols:L});if(V)throw new Error(V);this.facadeService.update(fe)})},delete:l=>{}};o.instance.rols=this.rols$(),o.instance.userEntity=t,o.instance.detailListener=n,this.onShowItem=!0,this.cdr.detectChanges(),o.instance.isOpen=!0}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-users"]],viewQuery:function(s,o){if(1&s&&e.GBs(R.l,5),2&s){let n;e.mGM(n=e.lsd())&&(o.dcWrapper=n.first)}},standalone:!0,features:[e.aNF],decls:5,vars:3,consts:[[3,"classList"],[3,"onAddToggle"],[3,"onSelectUser","users"],["dcWrapper",""]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",0)(2,"app-users-header",1),e.bIt("onAddToggle",function(){return o.onAddEvent()}),e.k0s(),e.j41(3,"app-users-list",2),e.bIt("onSelectUser",function(l){return o.onSelectUser(l)}),e.k0s()(),e.DNE(4,re,0,0,"ng-template",3),e.k0s()),2&s&&(e.Y8G("classList",o.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),e.R7$(),e.Y8G("classList",o.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"),e.R7$(2),e.Y8G("users",o.users$()))},dependencies:[d.MD,X,H,R.l],encapsulation:2})}return r})(),ne=(()=>{class r{constructor(){this.onAddToggleBtn=new e.bkB}onAddToggle(){this.onAddToggleBtn.emit()}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-rols-header"]],outputs:{onAddToggleBtn:"onAddToggleBtn"},standalone:!0,features:[e.aNF],decls:12,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-medium","text-primary-foreground",3,"click"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"h3",2),e.EFF(3,"Roles - Lista"),e.k0s(),e.j41(4,"div",3)(5,"a",4),e.EFF(6,"Lista"),e.k0s(),e.j41(7,"span"),e.EFF(8," - Roles"),e.k0s()()(),e.j41(9,"div",5)(10,"button",6),e.bIt("click",function(){return o.onAddToggle()}),e.EFF(11," Agregar Rol "),e.k0s()()())},dependencies:[d.MD],encapsulation:2})}return r})();const ie=["item-table-rol",""];let ae=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["","item-table-rol",""]],inputs:{rol:"rol"},standalone:!0,features:[e.aNF],attrs:ie,decls:9,vars:5,consts:[[1,"py-3","pr-3","text-start"],[1,"pl-1"],[1,"mb-1","text-sm","font-semibold","text-foreground","text-center"],[1,"py-3","pl-3","text-right"],[1,"pr-1"],[1,"text-sm","rounded-md",3,"ngClass"]],template:function(s,o){1&s&&(e.j41(0,"td",0)(1,"div",1)(2,"span",2),e.EFF(3),e.k0s()()(),e.j41(4,"td",3)(5,"div",4)(6,"span",5),e.EFF(7),e.nI1(8,"appTypeStatus"),e.k0s()()()),2&s&&(e.R7$(3),e.JRh(o.rol.rol_name),e.R7$(3),e.Y8G("ngClass",1===o.rol.status?"text-sm text-green-600 border p-1 border-green-600 rounded-md":"text-sm text-red-600 border p-1 border-red-600 rounded-md"),e.R7$(),e.JRh(e.bMT(8,3,o.rol.status)))},dependencies:[d.MD,d.YU,A.N],encapsulation:2})}return r})();function le(r,a){if(1&r){const t=e.RV6();e.j41(0,"tr",10),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG();return e.Njj(n.onSelectTable(o))}),e.k0s()}2&r&&e.Y8G("rol",a.$implicit)}let ce=(()=>{class r{constructor(){this.onSelectRol=new e.bkB,this.rols=[]}onSelectTable(t){this.onSelectRol.emit(t)}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-rols-list"]],inputs:{rols:"rols"},outputs:{onSelectRol:"onSelectRol"},standalone:!0,features:[e.aNF],decls:15,vars:1,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[1,"mb-4","flex","items-center","justify-between"],[1,"flex-col","items-center"],[1,"text-xs","text-foreground"],[1,"relative","overflow-x-auto"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground"],[1,"py-3","text-left"],[1,"py-3","text-right"],["item-table-rol","","class","border-b border-dashed border-border hover:bg-card",3,"rol","click",4,"ngFor","ngForOf"],["item-table-rol","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"click","rol"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.EFF(4,"Lista de Roles"),e.k0s()()(),e.j41(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th",7),e.EFF(10,"Rol"),e.k0s(),e.j41(11,"th",8),e.EFF(12,"Status"),e.k0s()()(),e.j41(13,"tbody"),e.DNE(14,le,1,1,"tr",9),e.k0s()()()()),2&s&&(e.R7$(14),e.Y8G("ngForOf",o.rols))},dependencies:[d.MD,d.Sq,ae],encapsulation:2})}return r})();var O=c(8006);let de=(()=>{class r{constructor(){this.idDisabled=!1,this.cdr=(0,e.WQX)(e.gRc),this.editorOptions={theme:"vs-dark",language:"json",wordWrap:"on",automaticLayout:!0},this.value='{\n  "presentation" : "demo"\n}'}ngOnInit(){}writeValue(t){this.value=t||"",this.cdr.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.idDisabled=t}changeValue(t){this.value=t,this.onTouched?.(),this.onChange?.(t),this.cdr.detectChanges()}onChangeModel(t){this.changeValue(t)}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-code-editor"]],standalone:!0,features:[e.Jv_([{provide:i.kq,useExisting:(0,e.Rfq)(()=>r),multi:!0}]),e.aNF],decls:1,vars:2,consts:[[2,"width","100%","height","100%",3,"ngModelChange","options","ngModel"]],template:function(s,o){1&s&&(e.j41(0,"ngx-monaco-editor",0),e.mxI("ngModelChange",function(l){return e.DH7(o.value,l)||(o.value=l),l}),e.bIt("ngModelChange",function(l){return o.onChangeModel(l)}),e.k0s()),2&s&&(e.Y8G("options",o.editorOptions),e.R50("ngModel",o.value))},dependencies:[d.MD,i.YN,i.BC,i.vS,O.Vv,O.xn],encapsulation:2})}return r})(),W=(()=>{class r{constructor(){this.isOpen=!1,this.defaultValueStructure='{\n  "apps" : [\n    {\n      "name" : "inventory",\n      "pages" : [\n        "identity/rols"\n      ]\n    }\n  ],\n  "services" : [\n    {\n      "name" : "inventory",\n      "endpoints":[\n        {\n          "name" : "warehouses",\n          "methods" : [\n            "GET",\n            "POST",\n            "PUT",\n            "DELETE"\n          ]\n        }\n      ]\n      \n    }\n\n  ]\n}',this.rolForm=new i.gE({id:new i.MJ,name:new i.MJ,structure:new i.MJ(this.defaultValueStructure),status:new i.MJ})}ngOnInit(){this.rol&&this.rolForm.patchValue({id:this.rol.rol_id,name:this.rol.rol_name,structure:this.rol.rol_structure,status:this.rol.status})}close(){this.listener.close()}onSubmit(){this.listener.submit(this.rolForm)}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-rol-form"]],inputs:{rol:"rol",listener:"listener"},standalone:!0,features:[e.aNF],decls:21,vars:3,consts:[[1,"flex","mt-2","w-screen","md:w-[500px]","bg-background","l","md:h-[95%]","overflow-auto","px-3","flex-col","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted",3,"ngSubmit","formGroup"],[1,"sticky","top-0","flex","flex-col","bg-background"],[1,"flex","relative","flex-row","items-center","gap-2","py-3","justify-start"],[1,"text-lg","text-foreground"],["type","button",1,"absolute","cursor-pointer","right-0","inline-flex","w-fit","justify-center","rounded-md","bg-background","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","hover:bg-card","sm:mt-0","sm:w-fit",3,"click"],[1,"border-dashed","border-border"],[1,"flex","flex-col","gap-2","py-2","w-full"],["for","name",1,"text-muted-foreground"],["name","name","type","text","formControlName","name","placeholder","Nuevo Rol",1,"w-full"],["formControlName","structure",1,"w-full","h-[300px]","md:h-[300px]"],[1,"flex","py-2","flex-col","gap-2"],["type","submit",1,"bg-primary","text-white","rounded-md","p-2"]],template:function(s,o){1&s&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(1,"div",1)(2,"div",2)(3,"span",3),e.EFF(4),e.k0s(),e.j41(5,"button",4),e.bIt("click",function(){return o.close()}),e.EFF(6," X "),e.k0s()(),e.nrm(7,"hr",5),e.k0s(),e.j41(8,"div",6)(9,"label",7),e.EFF(10,"Nombre del Rol"),e.k0s(),e.nrm(11,"input",8),e.k0s(),e.nrm(12,"hr",5),e.j41(13,"div",6)(14,"label",7),e.EFF(15,"Estructura"),e.k0s(),e.nrm(16,"app-code-editor",9),e.k0s(),e.nrm(17,"hr",5),e.j41(18,"div",10)(19,"button",11),e.EFF(20," Guardar Cambios "),e.k0s()()()),2&s&&(e.Y8G("@openClose",o.isOpen?"open":"closed")("formGroup",o.rolForm),e.R7$(4),e.JRh("Agregar Rol"))},dependencies:[d.MD,i.X1,i.qT,i.me,i.BC,i.cb,i.j4,i.JD,i.YN,de],encapsulation:2,data:{animation:[(0,p.hZ)("openClose",[(0,p.wk)("open",(0,p.iF)({opacity:1,transform:"translateY(0)",visibility:"visible"})),(0,p.wk)("closed",(0,p.iF)({opacity:0,transform:"translateY(-20px)",visibility:"hidden"})),(0,p.kY)("open => closed",[(0,p.i0)("0.5s")]),(0,p.kY)("closed => open",[(0,p.i0)("0.5s")])])]}})}return r})();class E{constructor(a,t,s){this.rol_name=a,this.rol_structure=t,this.status=s}static create(a){const{rol_name:t,rol_structure:s,status:o}=a;return t?s?o?[null,new E(t,s,o)]:["Status is required",void 0]:["Rol structure is required",void 0]:["Rol name is required",void 0]}}class U{constructor(a,t,s,o){this.rol_id=a,this.rol_name=t,this.rol_structure=s,this.status=o}static create(a){const{rol_id:t,rol_name:s,rol_structure:o,status:n}=a;return t?s?o?n?[null,new U(t,s,o,n)]:["Status is required",void 0]:["Rol structure is required",void 0]:["Rol name is required",void 0]:["Rol id is required",void 0]}}function ue(r,a){}const pe=[{path:"",component:J,children:[{path:"",redirectTo:"users",pathMatch:"full"},{path:"users",component:oe},{path:"rols",component:(()=>{class r{constructor(){this.facadeService=(0,e.WQX)($),this.dialogNotifier=new M.B,this.dialogService=(0,e.WQX)(D.o),this.cdr=(0,e.WQX)(e.gRc),this.rols$=this.facadeService.rols,this.onLoading$=this.facadeService.status,this.onShowItem=!1,(0,e.QZP)(()=>{switch(this.onLoading$()){case y.p.LOADING:this.dialogService.open({typeDialog:u.h.isLoading,listener:this.dialogNotifier,data:{title:"Cargando",description:"Espere un momento por favor",icon:"assets/icons/loading.svg"},options:{withActions:!1,withBackground:!0,position:[u.Y.center],colorIcon:"text-primary"}});break;case y.p.SUCCESS:this.dialogNotifier.next(null);const s={typeDialog:u.h.isSuccess,data:{title:"Operacion Exitosa",description:"La operacion se ha completado con exito",icon:"assets/icons/heroicons/outline/check-badge.svg"},options:{withBackground:!1,position:[u.Y.top,u.Y.right],colorIcon:"text-green-500",timeToShow:(0,B.O)(2e3)}};this.dialogService.open(s);break;default:this.dialogNotifier.next(null)}})}onSelectItemTable(t){const s=this.dcWrapper.viewContainerRef;s.clear();const o=s.createComponent(W),n={close:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},cancel:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},submit:l=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.dialogService.open({typeDialog:u.h.isAlert,data:{title:"Advertencia",description:"Estas seguro de realizar esta accion",icon:"assets/icons/heroicons/outline/exclamation.svg"},options:{withActions:!0,position:[u.Y.center],withBackground:!0,colorIcon:"text-red-500"}}).subscribe(f=>{const{name:w,structure:g,id:x,status:S}=l.value;console.log({value:l.value});const[k,C]=U.create({rol_id:x,rol_name:w,rol_structure:g,status:S});if(k)throw new Error(k);this.facadeService.update(C)})},delete:l=>{}};o.instance.rol=t,o.instance.listener=n,this.onShowItem=!0,this.cdr.detectChanges(),o.instance.isOpen=!0}onAddItem(){const t=this.dcWrapper.viewContainerRef;t.clear();const s=t.createComponent(W);s.instance.listener={close:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},cancel:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},submit:n=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.dialogService.open({typeDialog:u.h.isAlert,data:{title:"Advertencia",description:"Estas seguro de realizar esta accion",icon:"assets/icons/heroicons/outline/exclamation.svg"},options:{withActions:!0,position:[u.Y.center],withBackground:!0,colorIcon:"text-red-500"}}).subscribe(m=>{const{name:f,structure:w}=n.value,[g,x]=E.create({rol_name:f,rol_structure:w,status:1});if(g)throw new Error(g);this.facadeService.create(x)})},delete:n=>{}},this.onShowItem=!0,this.cdr.detectChanges(),s.instance.isOpen=!0}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-rols"]],viewQuery:function(s,o){if(1&s&&e.GBs(R.l,5),2&s){let n;e.mGM(n=e.lsd())&&(o.dcWrapper=n.first)}},standalone:!0,features:[e.aNF],decls:5,vars:3,consts:[[3,"classList"],[3,"onAddToggleBtn"],[3,"onSelectRol","rols"],["dcWrapper",""]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",0)(2,"app-rols-header",1),e.bIt("onAddToggleBtn",function(){return o.onAddItem()}),e.k0s(),e.j41(3,"app-rols-list",2),e.bIt("onSelectRol",function(l){return o.onSelectItemTable(l)}),e.k0s()(),e.DNE(4,ue,0,0,"ng-template",3),e.k0s()),2&s&&(e.Y8G("classList",o.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),e.R7$(),e.Y8G("classList",o.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"),e.R7$(2),e.Y8G("rols",o.rols$()))},dependencies:[d.MD,ne,ce,R.l],encapsulation:2})}return r})()},{path:"**",redirectTo:"errors/404"}]}];let me=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=e.$C({type:r});static#s=this.\u0275inj=e.G2t({imports:[T.iI.forChild(pe),T.iI]})}return r})(),he=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=e.$C({type:r});static#s=this.\u0275inj=e.G2t({imports:[me]})}return r})()}}]);