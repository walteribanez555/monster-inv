"use strict";(self.webpackChunkinv=self.webpackChunkinv||[]).push([[651],{2651:(pt,y,p)=>{p.r(y),p.d(y,{ProcessModule:()=>lt});var d=p(3030),l=p(177),t=p(3953);let T=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-process"]],standalone:!0,features:[t.aNF],decls:1,vars:0,template:function(r,s){1&r&&t.nrm(0,"router-outlet")},dependencies:[l.MD,d.n3],encapsulation:2})}return o})(),D=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-preparation-header"]],standalone:!0,features:[t.aNF],decls:12,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],["routerLink","./create",1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-medium","text-primary-foreground"]],template:function(r,s){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"h3",2),t.EFF(3,"Procesos - Preparaciones"),t.k0s(),t.j41(4,"div",3)(5,"a",4),t.EFF(6,"Lista"),t.k0s(),t.j41(7,"span"),t.EFF(8," - Preparaciones"),t.k0s()()(),t.j41(9,"div",5)(10,"a",6),t.EFF(11," Agregar Preparacion "),t.k0s()()())},dependencies:[l.MD,d.iI,d.Wk],encapsulation:2})}return o})();const Q=["item-list-preparation",""];let N=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["","item-list-preparation",""]],standalone:!0,features:[t.aNF],attrs:Q,decls:0,vars:0,template:function(r,s){},dependencies:[l.MD],encapsulation:2})}return o})();var a=p(9417);function M(o,c){if(1&o){const e=t.RV6();t.j41(0,"tr",19),t.bIt("click",function(){const s=t.eBV(e).$implicit,i=t.XpG();return t.Njj(i.onSelectTable(s))}),t.k0s()}}let B=(()=>{class o{constructor(){this.onItemSelect=new t.bkB,this.actualPage=1,this.itemsPerPage=30,this.onfilterEvent=new t.bkB}previousPage(){this.actualPage>1&&(this.actualPage=this.actualPage-1),this.filterEvent()}nextPage(){this.actualPage=this.actualPage+1,this.filterEvent()}filterEvent(){let e;this.initialDate&&!this.finalDate||!this.initialDate&&this.finalDate?console.log("Fechas requeridas"):(e={limit:this.itemsPerPage,offset:(this.actualPage-1)*this.itemsPerPage,init:this.initialDate,end:this.finalDate},console.log({params:e}),this.onfilterEvent.emit(e))}onSelectTable(e){this.onItemSelect.emit(e)}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-list-preparation"]],hostAttrs:[1,"w-full"],inputs:{preparations:"preparations"},outputs:{onItemSelect:"onItemSelect",onfilterEvent:"onfilterEvent"},standalone:!0,features:[t.aNF],decls:40,vars:4,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[1,"w-full","mx-auto"],[1,"border-dashed","border-border"],[1,"w-full","flex","flex-col","p-2","gap-2"],[1,"flex","flex-col","gap-2","items-end","md:flex-row","md:items-center","justify-between","w-full"],[1,"w-full","flex","flex-col","md:flex-row","md:w-1/2","gap-2","items-end"],[1,"w-full","flex","flex-col","gap-2"],[1,"text-muted-foreground","text-base"],["type","date",3,"ngModelChange","ngModel"],["type","button",1,"w-full","btn","bg-primary","text-primary-foreground","p-2","rounded-md","h-fit",3,"click"],[1,"w-full","md:w-1/2","flex","items-center","justify-end","gap-2"],[1,"p-1","text-white","rounded-md","bg-primary",3,"click"],[1,"text-foreground","text-base"],[1,"relative","overflow-x-auto","h-72","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","overflow-auto","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground","sticky","top-0","bg-background"],[1,"py-3","text-left"],[1,"py-3","text-right"],["item-list-preparation","","class","border-b border-dashed border-border hover:bg-card",3,"click",4,"ngFor","ngForOf"],["item-list-preparation","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"click"]],template:function(r,s){1&r&&(t.j41(0,"div",0)(1,"div",1),t.nrm(2,"hr",2),t.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"span",7),t.EFF(8,"Fecha Inicial"),t.k0s(),t.j41(9,"input",8),t.mxI("ngModelChange",function(n){return t.DH7(s.initialDate,n)||(s.initialDate=n),n}),t.k0s()(),t.j41(10,"div",6)(11,"span",7),t.EFF(12,"Fecha Inicial"),t.k0s(),t.j41(13,"input",8),t.mxI("ngModelChange",function(n){return t.DH7(s.finalDate,n)||(s.finalDate=n),n}),t.k0s()(),t.j41(14,"button",9),t.bIt("click",function(){return s.filterEvent()}),t.EFF(15," Filtrar "),t.k0s()(),t.j41(16,"div",10)(17,"button",11),t.bIt("click",function(){return s.previousPage()}),t.EFF(18,"<"),t.k0s(),t.j41(19,"span",12),t.EFF(20),t.k0s(),t.j41(21,"button",11),t.bIt("click",function(){return s.nextPage()}),t.EFF(22,">"),t.k0s()()()(),t.nrm(23,"hr",2),t.j41(24,"div",13)(25,"table",14)(26,"thead",15)(27,"tr")(28,"th",16),t.EFF(29,"Producto"),t.k0s(),t.j41(30,"th",16),t.EFF(31,"Almacen"),t.k0s(),t.j41(32,"th",16),t.EFF(33,"Cantidad"),t.k0s(),t.j41(34,"th",16),t.EFF(35,"Fecha"),t.k0s(),t.j41(36,"th",17),t.EFF(37,"Tipo"),t.k0s()()(),t.j41(38,"tbody"),t.DNE(39,M,1,0,"tr",18),t.k0s()()()()()),2&r&&(t.R7$(9),t.R50("ngModel",s.initialDate),t.R7$(4),t.R50("ngModel",s.finalDate),t.R7$(7),t.JRh(s.actualPage),t.R7$(19),t.Y8G("ngForOf",s.preparations))},dependencies:[l.MD,l.Sq,N,a.YN,a.me,a.BC,a.vS],encapsulation:2})}return o})();var w=p(5396),F=p(1413),k=p(7249),b=p(2938),I=p(2109),g=p(2934),f=p(5246),G=p(9182);class m{static#t=this.getSlices=(0,g.OD)(G.X);static#e=this.getPreparations=(0,g.Mz)([m.getSlices.preparations],c=>c);static#o=this.getPreparationById=(0,g.Mz)([m.getSlices.preparatioById],c=>c);static#r=this.getStatus=(0,g.Mz)([m.getSlices.status],c=>c)}let C=(()=>{class o{constructor(){this.store=(0,t.WQX)(g.il),this.preparations=this.store.selectSignal(m.getPreparations),this.preparationById=this.store.selectSignal(m.getPreparationById),this.status=this.store.selectSignal(m.getStatus),this.store.dispatch(new f.b.GetAll({},{onResult:e=>{console.log(e)},onError:e=>{console.log(e)}}))}create(e,r){this.store.dispatch(new f.b.Create(e,r))}update(e,r){this.store.dispatch(new f.b.Update(e,r))}delete(e,r){this.store.dispatch(new f.b.Delete(e,r))}get(e,r){this.store.dispatch(new f.b.Get(e,r))}getAll(e,r){this.store.dispatch(new f.b.GetAll(e,r))}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var S=p(9652),h=p(6007),u=p(4449);const $=(o,c)=>({"border-primary text-primary outline-none active-tab":o,"text-muted-foreground border-transparent":c});function W(o,c){if(1&o){const e=t.RV6();t.j41(0,"button",3),t.bIt("click",function(){const s=t.eBV(e).$implicit,i=t.XpG();return t.Njj(i.selectWarehouse(s.warehouse_id))}),t.EFF(1),t.k0s()}if(2&o){const e=c.$implicit,r=t.XpG();t.Y8G("ngClass",t.l_i(2,$,r.selectedWarehouse===e.warehouse_id,r.selectedWarehouse!==e.warehouse_id)),t.R7$(),t.SpI(" ",e.name," ")}}let E=(()=>{class o{constructor(){this.selectedWarehouse=10,this.onfilterEvent=new t.bkB}selectWarehouse(e){this.selectedWarehouse=e,this.filterEvent()}filterEvent(){let e;e={warehouse_id:this.selectedWarehouse},this.onfilterEvent.emit(e)}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-list-warehouses"]],inputs:{warehouses:"warehouses"},outputs:{onfilterEvent:"onfilterEvent"},standalone:!0,features:[t.aNF],decls:3,vars:1,consts:[[1,"py-2","px-2","border","w-full","shadow-sm","bg-background","border-muted","rounded-md","flex","flex-col","gap-2","overflow-auto"],[1,"flex","w-full","overflow-auto","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted"],["class","py-2 px-4 text-sm font-medium border-b-2  hover:border-primary hover:text-primary focus:outline-none",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"py-2","px-4","text-sm","font-medium","border-b-2","hover:border-primary","hover:text-primary","focus:outline-none",3,"click","ngClass"]],template:function(r,s){1&r&&(t.j41(0,"div",0)(1,"div",1),t.DNE(2,W,2,5,"button",2),t.k0s()()),2&r&&(t.R7$(2),t.Y8G("ngForOf",s.warehouses))},dependencies:[l.MD,l.YU,l.Sq],encapsulation:2})}return o})();var _=p(8606);function Y(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",9),t.bIt("click",function(){const s=t.eBV(e).$implicit,i=t.XpG(2);return t.Njj(i.onSelectItem(s))}),t.j41(1,"div",10)(2,"span",11),t.EFF(3),t.k0s()(),t.j41(4,"div")(5,"span",12),t.EFF(6,"Seleccionar"),t.k0s()()()}if(2&o){const e=c.$implicit;t.R7$(3),t.SpI(" ",e.name,"")}}function V(o,c){1&o&&(t.j41(0,"div",13)(1,"span",14),t.EFF(2,"No hay Items"),t.k0s()())}function O(o,c){if(1&o&&(t.j41(0,"div",6),t.DNE(1,Y,7,1,"div",7)(2,V,3,0,"div",8),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.items),t.R7$(),t.Y8G("ngIf",0==e.items.length)}}let X=(()=>{class o{constructor(){this.displayList=!0,this.onSelectItemEvent=new t.bkB,this.onItemSelect=new t.bkB}onSelectItem(e){console.log(e),this.onSelectItemEvent.emit(e)}onDisplayList(){this.displayList=!this.displayList}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-list-type-products"]],hostAttrs:[1,"w-full","md:w-1/3"],inputs:{items:"items"},outputs:{onSelectItemEvent:"onSelectItemEvent",onItemSelect:"onItemSelect"},standalone:!0,features:[t.aNF],decls:7,vars:2,consts:[[1,"py-2","px-2","border","w-full","shadow-sm","bg-background","border-muted","rounded-md","flex","flex-col","gap-2","overflow-auto"],[1,"flex","flex-row","relative","items-center","p-2","justify-between",3,"click"],[1,"text","text-foreground","text-base"],["src","assets/icons/heroicons/outline/chevron-right.svg",1,"hover:bg-muted","cursor-pointer","text-muted-foreground","rotate-90","ml-4",3,"svgClass"],[1,"border-dashed","border-border"],["class"," flex flex-col max-h-[500px] overflow-auto  scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted md:py-4",4,"ngIf"],[1,"flex","flex-col","max-h-[500px]","overflow-auto","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted","md:py-4"],["class","w-full  items-center  flex flex-row justify-between border border-muted gap-2 cursor-pointer p-2  hover:bg-muted ",3,"click",4,"ngFor","ngForOf"],["class","gap-2 p-2 ",4,"ngIf"],[1,"w-full","items-center","flex","flex-row","justify-between","border","border-muted","gap-2","cursor-pointer","p-2","hover:bg-muted",3,"click"],[1,"flex","flex-col","gap-2"],[1,"text","text-base","text-foreground"],[1,"text-xs","text-muted-foreground"],[1,"gap-2","p-2"],[1,"text","text-muted-foreground","text-xs"]],template:function(r,s){1&r&&(t.j41(0,"div",0)(1,"div",1),t.bIt("click",function(){return s.onDisplayList()}),t.j41(2,"span",2),t.EFF(3,"Tipo de Producto"),t.k0s(),t.nrm(4,"svg-icon",3),t.k0s(),t.nrm(5,"hr",4),t.DNE(6,O,3,2,"div",5),t.k0s()),2&r&&(t.R7$(4),t.Y8G("svgClass","h-6 w-6  color-muted"),t.R7$(2),t.Y8G("ngIf",s.displayList))},dependencies:[l.MD,l.Sq,l.bT,_.DM],encapsulation:2})}return o})();function U(o,c){}let A=(()=>{class o{constructor(){this.productTypeFacadeService=(0,t.WQX)(b.p),this.warehouseFacadeService=(0,t.WQX)(I.p),this.productFacadeService=(0,t.WQX)(w.x),this.preparationFacadeService=(0,t.WQX)(C),this.dialogService=(0,t.WQX)(S.o),this.router=(0,t.WQX)(d.Ix),this.onLoading$=this.preparationFacadeService.status,this.dialogNotifier=new F.B,this.onShowItem=!1,this.productsList=this.productFacadeService.products,this.products=this.productTypeFacadeService.productTypes,this.warehouses=this.warehouseFacadeService.warehouses,this.listProducts=this.productsList().map(e=>{const r=this.products().find(s=>s.product_type_id==e.product_type_id);return{id:e.product_type_id,name:r?r.name:"Item"}}),this.itemsListStates=[{id:1,name:"Interno"},{id:2,name:"Venta"},{id:3,name:"Elaborado"},{id:4,name:"Semi Elaborado"}],(0,t.QZP)(()=>{switch(this.listProducts=this.products().map(e=>({id:e.product_type_id,name:e.name})),this.onLoading$()){case h.p.LOADING:this.dialogService.open({typeDialog:u.h.isLoading,listener:this.dialogNotifier,data:{title:"Cargando",description:"Espere un momento por favor",icon:"assets/icons/loading.svg"},options:{withActions:!1,withBackground:!0,position:[u.Y.center],colorIcon:"text-primary"}});break;case h.p.SUCCESS:this.dialogNotifier.next(null);const r={typeDialog:u.h.isSuccess,data:{title:"Operacion Exitosa",description:"La operacion se ha completado con exito",icon:"assets/icons/heroicons/outline/check-badge.svg"},options:{withBackground:!1,position:[u.Y.top,u.Y.right],colorIcon:"text-green-500",timeToShow:(0,k.O)(2e3)}};this.dialogService.open(r);break;default:this.dialogNotifier.next(null)}})}ngOnInit(){}onFilterByWarehouse(e){this.warehouseSelected=e.warehouse_id,this.localParams={...this.localParams,...e},this.onFilterItems()}onTypeProductSeleted(e){console.log(e),this.localParams={...this.localParams,product_type_id:e.id},this.onFilterItems()}onDatesSelected(e){this.localParams={...this.localParams,...e},this.onFilterItems()}onFilterItems(){this.preparationFacadeService.getAll(this.localParams,{onResult:e=>{console.log(e)},onError:e=>{console.log(e)}})}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-preparation"]],standalone:!0,features:[t.aNF],decls:10,vars:4,consts:[[3,"classList"],[1,"flex","flex-col","w-full"],[1,"px-8","gap-2","md:py-4","pt-4"],[3,"onfilterEvent","warehouses"],[1,"mx-auto","py-8","flex","flex-col","md:flex-row","items-start","px-8","gap-2","md:w-full","overflow-auto","h-full","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted","md:py-4"],[3,"onSelectItemEvent","items"],[3,"onfilterEvent"],["dcWrapper",""]],template:function(r,s){1&r&&(t.j41(0,"div",0)(1,"div",0),t.nrm(2,"app-preparation-header"),t.j41(3,"div",1)(4,"div",2)(5,"app-list-warehouses",3),t.bIt("onfilterEvent",function(n){return s.onFilterByWarehouse(n)}),t.k0s()(),t.j41(6,"div",4)(7,"app-list-type-products",5),t.bIt("onSelectItemEvent",function(n){return s.onTypeProductSeleted(n)}),t.k0s(),t.j41(8,"app-list-preparation",6),t.bIt("onfilterEvent",function(n){return s.onDatesSelected(n)}),t.k0s()()()(),t.DNE(9,U,0,0,"ng-template",7),t.k0s()),2&r&&(t.Y8G("classList",s.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),t.R7$(),t.Y8G("classList",s.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"),t.R7$(4),t.Y8G("warehouses",s.warehouses()),t.R7$(2),t.Y8G("items",s.itemsListStates))},dependencies:[l.MD,D,B,E,X],encapsulation:2})}return o})(),J=(()=>{class o{onAddToggle(){}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-recipes-header"]],standalone:!0,features:[t.aNF],decls:12,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-medium","text-primary-foreground",3,"click"]],template:function(r,s){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"h3",2),t.EFF(3,"Procesos - Recetas"),t.k0s(),t.j41(4,"div",3)(5,"a",4),t.EFF(6,"Lista"),t.k0s(),t.j41(7,"span"),t.EFF(8," - Recetas"),t.k0s()()(),t.j41(9,"div",5)(10,"button",6),t.bIt("click",function(){return s.onAddToggle()}),t.EFF(11," Agregar Receta "),t.k0s()()())},dependencies:[l.MD],encapsulation:2})}return o})(),q=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-list-recipes"]],standalone:!0,features:[t.aNF],decls:0,vars:0,template:function(r,s){},dependencies:[l.MD],encapsulation:2})}return o})();function H(o,c){}let z=(()=>{class o{constructor(){this.onShowItem=!1}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-recipes"]],standalone:!0,features:[t.aNF],decls:5,vars:2,consts:[[3,"classList"],["dcWrapper",""]],template:function(r,s){1&r&&(t.j41(0,"div",0)(1,"div",0),t.nrm(2,"app-recipes-header")(3,"app-list-recipes"),t.k0s(),t.DNE(4,H,0,0,"ng-template",1),t.k0s()),2&r&&(t.Y8G("classList",s.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),t.R7$(),t.Y8G("classList",s.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"))},dependencies:[l.MD,J,q],encapsulation:2})}return o})();var Z=p(6194);function K(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",9),t.bIt("click",function(){const s=t.eBV(e).$implicit,i=t.XpG(2);return t.Njj(i.onSelectItem(s))}),t.j41(1,"div",10)(2,"span",11),t.EFF(3),t.nI1(4,"appProduct"),t.k0s(),t.j41(5,"span",12),t.EFF(6),t.k0s()(),t.j41(7,"div")(8,"span",13),t.EFF(9,"Seleccionar"),t.k0s()()()}if(2&o){const e=c.$implicit;t.R7$(3),t.SpI(" ",t.bMT(4,2,e.product_type_id),""),t.R7$(3),t.JRh("Cantidad : "+e.quantity)}}function tt(o,c){1&o&&(t.j41(0,"div",14)(1,"span",15),t.EFF(2,"No hay Productos"),t.k0s()())}function et(o,c){if(1&o&&(t.j41(0,"div",6),t.DNE(1,K,10,4,"div",7)(2,tt,3,0,"div",8),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.products),t.R7$(),t.Y8G("ngIf",0==e.products.length)}}let ot=(()=>{class o{constructor(){this.displayList=!0,this.onSelectItemEvent=new t.bkB}onSelectItem(e){this.onSelectItemEvent.emit(e)}onDisplayList(){this.displayList=!this.displayList}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-list-products"]],inputs:{products:"products"},outputs:{onSelectItemEvent:"onSelectItemEvent"},standalone:!0,features:[t.aNF],decls:7,vars:2,consts:[[1,"py-2","px-2","border","w-full","shadow-sm","bg-background","border-muted","rounded-md","flex","flex-col","gap-2","overflow-auto"],[1,"flex","flex-row","relative","items-center","p-2","justify-between",3,"click"],[1,"text","text-foreground","text-base"],["src","assets/icons/heroicons/outline/chevron-right.svg",1,"hover:bg-muted","cursor-pointer","text-muted-foreground","rotate-90","ml-4",3,"svgClass"],[1,"border-dashed","border-border"],["class"," flex flex-col max-h-[500px] overflow-auto  scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted md:py-4",4,"ngIf"],[1,"flex","flex-col","max-h-[500px]","overflow-auto","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted","md:py-4"],["class","w-full  items-center  flex flex-row justify-between border border-muted gap-2 cursor-pointer p-2  hover:bg-muted ",3,"click",4,"ngFor","ngForOf"],["class","gap-2 p-2 ",4,"ngIf"],[1,"w-full","items-center","flex","flex-row","justify-between","border","border-muted","gap-2","cursor-pointer","p-2","hover:bg-muted",3,"click"],[1,"flex","flex-col","gap-2"],[1,"text","text-base","text-foreground"],[1,"text","text-xs","text-muted-foreground"],[1,"text-xs","text-muted-foreground"],[1,"gap-2","p-2"],[1,"text","text-muted-foreground","text-xs"]],template:function(r,s){1&r&&(t.j41(0,"div",0)(1,"div",1),t.bIt("click",function(){return s.onDisplayList()}),t.j41(2,"span",2),t.EFF(3,"Lista de Productos por almacen"),t.k0s(),t.nrm(4,"svg-icon",3),t.k0s(),t.nrm(5,"hr",4),t.DNE(6,et,3,2,"div",5),t.k0s()),2&r&&(t.R7$(4),t.Y8G("svgClass","h-6 w-6  color-muted"),t.R7$(2),t.Y8G("ngIf",s.displayList))},dependencies:[l.MD,l.Sq,l.bT,_.DM,Z.I],encapsulation:2})}return o})(),rt=(()=>{class o{constructor(){this.isDisabled=!1,this.cdr=(0,t.WQX)(t.gRc),this.name="item",this.id=0}ngAfterViewInit(){}ngOnInit(){}writeValue(e){this.value=e,this.cdr.markForCheck()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}changeValue(e){this.value=e,this.onTouched?.(),this.onChange?.(e)}onChangeFromInput(e){this.changeValue({id:this.id,amount:e})}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-quantity"]],inputs:{name:"name",id:"id"},standalone:!0,features:[t.Jv_([{provide:a.kq,useExisting:(0,t.Rfq)(()=>o),multi:!0}]),t.aNF],decls:4,vars:2,consts:[[1,"flex","w-full","sm:w-fit","items-start","flex-col","gap-2","p-2"],[1,"text","text-foreground","text-sm","ml-2"],["type","number","placeholder"," 100.2",1,"w-full",3,"ngModelChange","ngModel"]],template:function(r,s){1&r&&(t.j41(0,"div",0)(1,"span",1),t.EFF(2),t.k0s(),t.j41(3,"input",2),t.mxI("ngModelChange",function(n){return t.DH7(s.amount,n)||(s.amount=n),n}),t.bIt("ngModelChange",function(n){return s.onChangeFromInput(n)}),t.k0s()()),2&r&&(t.R7$(2),t.JRh(s.name),t.R7$(),t.R50("ngModel",s.amount))},dependencies:[l.MD,a.YN,a.me,a.Q0,a.BC,a.vS],encapsulation:2})}return o})();function st(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",2),t.nrm(1,"app-quantity",3),t.j41(2,"div")(3,"button",4),t.bIt("click",function(){const s=t.eBV(e).index,i=t.XpG();return t.Njj(i.onRemoveItemOnList(s))}),t.nrm(4,"svg-icon",5),t.k0s()()()}if(2&o){const e=c.$implicit,r=c.index,s=t.XpG();t.R7$(),t.Y8G("name",e.name)("id",e.id)("formControl",s.formsQuantity[r]),t.R7$(3),t.Y8G("svgClass","h-5 w-5 text-muted-foreground/50  hover:text-red-600")}}let nt=(()=>{class o{constructor(){this.listQuantityInterfaceEvent=new t.bkB,this.itemsQuantity=[],this.formsQuantity=[],this.listQuantityInterface={onAddItem:e=>{if(console.log(e),!this.itemsQuantity.some(s=>s.id==e.id)){const s=new a.MJ;s.valueChanges.subscribe({next:()=>{const i=this.formsQuantity.map(n=>n.value);this.changeValue(i)}}),this.formsQuantity.push(s),this.itemsQuantity.push(e)}},onReset:()=>{this.itemsQuantity=[],this.formsQuantity=[]}},this.isDisabled=!1,this.cdr=(0,t.WQX)(t.gRc)}ngOnInit(){this.listQuantityInterfaceEvent.emit(this.listQuantityInterface)}onRemoveItemOnList(e){this.itemsQuantity.splice(e,1),this.formsQuantity.splice(e,1);const r=this.formsQuantity.map(s=>s.value);this.changeValue(r)}writeValue(e){this.value=e,this.cdr.markForCheck()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}changeValue(e){this.value=e,this.onTouched?.(),this.onChange?.(e)}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-list-quantity"]],outputs:{listQuantityInterfaceEvent:"listQuantityInterfaceEvent"},standalone:!0,features:[t.Jv_([{provide:a.kq,useExisting:(0,t.Rfq)(()=>o),multi:!0}]),t.aNF],decls:2,vars:1,consts:[[1,"flex","flex-row","w-full","gap-2","flex-wrap","p-2","border","border-muted","rounded-sm"],["class","p-2 gap-2 w-full sm:w-fit flex flex-row border rounded-sm border-muted items-start  justify-between",4,"ngFor","ngForOf"],[1,"p-2","gap-2","w-full","sm:w-fit","flex","flex-row","border","rounded-sm","border-muted","items-start","justify-between"],[1,"w-full",3,"name","id","formControl"],["type","button",1,"cursor-pointer","h-full","border","border-muted",3,"click"],["src","assets/icons/heroicons/outline/x.svg",3,"svgClass"]],template:function(r,s){1&r&&(t.j41(0,"div",0),t.DNE(1,st,5,4,"div",1),t.k0s()),2&r&&(t.R7$(),t.Y8G("ngForOf",s.itemsQuantity))},dependencies:[l.MD,l.Sq,rt,_.DM,a.YN,a.BC,a.X1,a.l_],encapsulation:2})}return o})();var it=p(1467);let P=(()=>{class o{constructor(){this.onReceivedInterfaceList=new t.bkB,this.onSubmitEvent=new t.bkB,this.formRecipe=new a.gE({product_type_id:new a.MJ,quantity:new a.MJ,created_at:new a.MJ,description:new a.MJ,items:new a.MJ})}onInterfaceQuantityReceived(e){this.listQuantityInterface=e,this.onReceivedInterfaceList.emit(e)}onSubmit(){this.formRecipe.valid&&this.onSubmitEvent.emit(this.formRecipe.value)}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-form-recipes"]],inputs:{listProducts:"listProducts"},outputs:{onReceivedInterfaceList:"onReceivedInterfaceList",onSubmitEvent:"onSubmitEvent"},standalone:!0,features:[t.aNF],decls:25,vars:2,consts:[[1,"w-full","flex","flex-col","p-2","gap-2","bg-background","shadow-sm","border","border-muted","rounded-md"],[1,"text-foreground","text-base"],[1,"border-dashed","bg-muted"],["action","",1,"w-full",3,"ngSubmit","formGroup"],[1,"text-foreground","text-sm"],["formControlName","product_type_id",3,"items"],["formControlName","created_at","type","datetime-local","placeholder","0"],["formControlName","quantity","type","number","placeholder","0"],["formControlName","description","placeholder","Una breve descripcion del proceso a realizar"],["formControlName","items",3,"listQuantityInterfaceEvent"],[1,"flex","flex-row","gap-2","w-full","justify-end","py-2"],["type","button",1,"p-2","border","rounded-sm","border-muted","text-base","text-muted-foreground","hover:bg-muted"],["type","submit",1,"p-2","bg-primary","text-primary-foreground","rounded-sm"]],template:function(r,s){1&r&&(t.j41(0,"div",0)(1,"span",1),t.EFF(2,"Produccion"),t.k0s(),t.nrm(3,"hr",2),t.j41(4,"form",3),t.bIt("ngSubmit",function(){return s.onSubmit()}),t.j41(5,"span",4),t.EFF(6," Producto a crear "),t.k0s(),t.nrm(7,"app-select",5),t.j41(8,"span",4),t.EFF(9," Fecha "),t.k0s(),t.nrm(10,"input",6),t.j41(11,"span",4),t.EFF(12," Cantidad del producto "),t.k0s(),t.nrm(13,"input",7),t.j41(14,"span",4),t.EFF(15," Descripcion "),t.k0s(),t.nrm(16,"textarea",8),t.j41(17,"span",4),t.EFF(18,"Lista de productos"),t.k0s(),t.j41(19,"app-list-quantity",9),t.bIt("listQuantityInterfaceEvent",function(n){return s.onInterfaceQuantityReceived(n)}),t.k0s(),t.j41(20,"div",10)(21,"button",11),t.EFF(22,"Cancelar"),t.k0s(),t.j41(23,"button",12),t.EFF(24,"Realizar"),t.k0s()()()()),2&r&&(t.R7$(4),t.Y8G("formGroup",s.formRecipe),t.R7$(3),t.Y8G("items",s.listProducts))},dependencies:[l.MD,a.YN,a.qT,a.me,a.Q0,a.BC,a.cb,a.X1,a.j4,a.JD,nt,it.w],encapsulation:2})}return o})();class x{constructor(c,e,r,s,i,n,v){this.product_type_id=c,this.warehouse_id=e,this.status=r,this.description=s,this.created_at=i,this.quantity=n,this.items=v}static fromObj(c){const{product_type_id:e,warehouse_id:r,status:s,description:i,created_at:n,quantity:v,items:L}=c;return e?r?s?i?n?v?L?[void 0,new x(e,r,s,i,n,v,L)]:["Items are required",void 0]:["Quantity is required",void 0]:["Created at is required",void 0]:["Description is required",void 0]:["Status is required",void 0]:["Warehouse Id is required",void 0]:["Product type id is required",void 0]}}let j=(()=>{class o{ngOnInit(){}constructor(){this.activatedRouter=(0,t.WQX)(d.nX),this.productTypeFacadeService=(0,t.WQX)(b.p),this.warehouseFacadeService=(0,t.WQX)(I.p),this.productFacadeService=(0,t.WQX)(w.x),this.preparationFacadeService=(0,t.WQX)(C),this.dialogService=(0,t.WQX)(S.o),this.router=(0,t.WQX)(d.Ix),this.onLoading$=this.preparationFacadeService.status,this.dialogNotifier=new F.B,this.products=this.productTypeFacadeService.productTypes,this.warehouses=this.warehouseFacadeService.warehouses,this.productsList=this.productFacadeService.products,this.listProducts=this.productsList().map(e=>{const r=this.products().find(s=>s.product_type_id==e.product_type_id);return{id:e.product_type_id,name:r?r.name:"Item"}}),(0,t.QZP)(()=>{switch(this.listProducts=this.products().map(e=>({id:e.product_type_id,name:e.name})),this.onLoading$()){case h.p.LOADING:this.dialogService.open({typeDialog:u.h.isLoading,listener:this.dialogNotifier,data:{title:"Cargando",description:"Espere un momento por favor",icon:"assets/icons/loading.svg"},options:{withActions:!1,withBackground:!0,position:[u.Y.center],colorIcon:"text-primary"}});break;case h.p.SUCCESS:this.dialogNotifier.next(null);const r={typeDialog:u.h.isSuccess,data:{title:"Operacion Exitosa",description:"La operacion se ha completado con exito",icon:"assets/icons/heroicons/outline/check-badge.svg"},options:{withBackground:!1,position:[u.Y.top,u.Y.right],colorIcon:"text-green-500",timeToShow:(0,k.O)(2e3)}};this.dialogService.open(r);break;default:this.dialogNotifier.next(null)}})}onSelectItem(e){const r=this.products().find(i=>i.product_type_id==e.product_type_id),s={id:e.product_type_id,name:r?r.name:"Item",value:e.quantity};this.interfaceListQuantities?.onAddItem(s)}onFilterByWarehouse(e){this.warehouseSelected=e.warehouse_id,this.productFacadeService.getItems(e),this.interfaceListQuantities?.onReset()}onCreatedInterface(e){this.interfaceListQuantities=e}onCreateRecipe(e){const r={...e,items:e.items.map(n=>({product_type_id:n.id,quantity:n.amount})),status:1,warehouse_id:this.warehouseSelected},[s,i]=x.fromObj(r);s?console.log(s):this.preparationFacadeService.create(i,{onError:n=>{console.log(n)},onResult:n=>{this.router.navigateByUrl("/process/preparations")}})}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-preparation"]],standalone:!0,features:[t.aNF],decls:6,vars:3,consts:[[1,"flex","flex-col","w-full"],[1,"px-8","gap-2","md:py-4","pt-4"],[3,"onfilterEvent","warehouses"],[1,"mx-auto","py-8","flex","flex-col","md:flex-row","items-start","px-8","gap-2","md:w-full","overflow-auto","h-full","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted","md:py-4"],[1,"w-full","md:w-[33%]",3,"onSelectItemEvent","products"],[1,"w-full","md:w-[66%]",3,"onReceivedInterfaceList","onSubmitEvent","listProducts"]],template:function(r,s){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"app-list-warehouses",2),t.bIt("onfilterEvent",function(n){return s.onFilterByWarehouse(n)}),t.k0s()(),t.j41(3,"div",3)(4,"app-list-products",4),t.bIt("onSelectItemEvent",function(n){return s.onSelectItem(n)}),t.k0s(),t.j41(5,"app-form-recipes",5),t.bIt("onReceivedInterfaceList",function(n){return s.onCreatedInterface(n)})("onSubmitEvent",function(n){return s.onCreateRecipe(n)}),t.k0s()()()),2&r&&(t.R7$(2),t.Y8G("warehouses",s.warehouses()),t.R7$(2),t.Y8G("products",s.productsList()),t.R7$(),t.Y8G("listProducts",s.listProducts))},dependencies:[l.MD,ot,P,E],encapsulation:2})}return o})(),R=(()=>{class o{ngOnInit(){}constructor(){this.activatedRouter=(0,t.WQX)(d.nX),this.productTypeFacadeService=(0,t.WQX)(b.p),this.products=this.productTypeFacadeService.productTypes,this.listProducts=this.products().map(e=>({id:e.product_type_id,name:e.name})),(0,t.QZP)(()=>{this.listProducts=this.products().map(e=>({id:e.product_type_id,name:e.name}))})}onSelectItem(e){const r={id:e.product_type_id,name:e.name,value:0};this.interfaceListQuantities?.onAddItem(r)}onCreatedInterface(e){this.interfaceListQuantities=e}onCreateRecipe(e){console.log({value:e})}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-recipe"]],standalone:!0,features:[t.aNF],decls:2,vars:1,consts:[[1,"mx-auto","py-8","flex","flex-col","md:flex-row","items-start","px-8","gap-2","md:w-full","overflow-auto","h-full","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted","md:py-4"],[1,"w-full","md:w-[66%]",3,"onReceivedInterfaceList","onSubmitEvent","listProducts"]],template:function(r,s){1&r&&(t.j41(0,"div",0)(1,"app-form-recipes",1),t.bIt("onReceivedInterfaceList",function(n){return s.onCreatedInterface(n)})("onSubmitEvent",function(n){return s.onCreateRecipe(n)}),t.k0s()()),2&r&&(t.R7$(),t.Y8G("listProducts",s.listProducts))},dependencies:[l.MD,P],encapsulation:2})}return o})();const at=[{path:"",component:T,children:[{path:"",redirectTo:"preparation",pathMatch:"full"},{path:"preparations",component:A},{path:"recipes",component:z},{path:"preparations/create",component:j},{path:"preparations/view/:id",component:j},{path:"recipes/create",component:R},{path:"recipes/view/:id",component:R},{path:"**",redirectTo:"errors/404"}]}];let ct=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.$C({type:o});static#o=this.\u0275inj=t.G2t({imports:[d.iI.forChild(at),d.iI]})}return o})(),lt=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.$C({type:o});static#o=this.\u0275inj=t.G2t({imports:[ct]})}return o})()}}]);